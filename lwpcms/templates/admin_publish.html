{% extends 'admin.html' %}

{% from '_formhelpers.html' import render_field %}
{% from '_svg.html' import render_svg %}


{% block admin_content %}
    <section>
        <h2>Publish</h2>
        <p>
            Welcome to the publisher section.
            This section is used to create content.
        </p>
    </section>
    <section>
        <form method='POST' class='lwpcms-form' enctype="multipart/form-data">
            <section>
                <h3>Create Post</h3>
            </section>
            <section>
                {{ render_field(form.title) }}
                {{ render_field(form.content) }}
            </section>
            <section>
                <dt>
                    <label>Attachments</label>
                </td>
                <div class='lwpcms-addlist' type='lwpcms-file'>
                    {% if post %}
                        <div class="lwpcms-addlist-items">
                        {% for attachment in post.attachments %}
                            <div class="lwpcms-addlist-item" childs="[object HTMLInputElement]">
                               <span childs="[object HTMLUListElement]">
                                 <ul childs="[object HTMLLIElement],[object HTMLLIElement],[object HTMLInputElement]">
                                    <li childs="[object HTMLLabelElement]"><label>{{ attachment.meta.original_filename }}</label></li>
                                    <li childs="[object HTMLButtonElement]"><button class="lwpcms-btn" innerhtml="Remove">Remove</button></li>
                                    <input type="hidden" name="attachment_id" value="{{ attachment._id }}">
                                 </ul>
                              </span>
                           </div>
                       {% endfor %}
                        </div>
                    {% endif %}
                </div>
            </section>
            <section>
                {% if not id %}
                    {{ render_field(form.submit) }}
                {% else %}
                    {{ render_field(form.update) }}
                {% endif %}
            </section>
        </form>
    </section>
{% endblock %}
